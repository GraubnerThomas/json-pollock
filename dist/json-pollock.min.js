!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("JsonPollock",[],t):"object"==typeof exports?exports.JsonPollock=t():e.JsonPollock=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=3)}([function(e,t,n){var r,a,r,i;!function(e,n){"use strict";r=[],a=function(){return n(e,e,!0)}.apply(t,r)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(e,t,n){"use strict";function r(e,t,n){var r=[];if(e[t]&&e[t].length)for(var a=0;a<e[t].length;a++)n&&"*"!==e[t][a].appName&&e[t][a].appName!==n||r.push(e[t][a]);if(e["*"])for(var i=0;i<e["*"].length;i++)n&&"*"!==e["*"][i].appName&&e["*"][i].appName!==n||r.push(e["*"][i]);return r}function a(t,n,r){e&&"function"==typeof e.log&&e.log(t,n,r)}function i(e){var t,n=e.unbindObj[e.attrName],r=!1;if(!e.unbindObj)return a("CMD listen id not spec for unbind","ERROR",e.loggerName),null;if("string"==typeof e.unbindObj)return s(e.lstnrs,e.unbindObj);if(!e.unbindObj.func&&!e.unbindObj.context&&!e.unbindObj.appName)return!1;var i=e.lstnrs;n&&(i={},i[n]=e.lstnrs[n]);for(var o in i)i.hasOwnProperty(o)&&i[o]&&i[o].length&&(t=c(i[o],e.unbindObj.func,e.unbindObj.context,e.unbindObj.appName),t.length!==i[o].length&&(e.lstnrs[o]=t,r=!0));return r}function o(e){var t={};if(e.constructor===Object)for(var n in e)e.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]&&("object"==typeof e[n]&&e[n].constructor!==Array?t[n]=o(e[n]):e[n].constructor===Array?t[n]=e[n].slice(0)||[]:"function"!=typeof e[n]&&(t[n]=null!==e[n]&&void 0!==e[n]?e[n]:""));else e.constructor===Array?t=e.slice(0)||[]:"function"!=typeof e&&(t=e);return t}function u(e,t,n){if((void 0===n||"*"===n)&&"*"===t)return e;for(var r=[],a=0;a<e.length;a++)e[a].eventName!==n&&"*"!==n||(t&&t===e[a].appName||!e[a].appName||"*"===e[a].appName||"*"===t)&&r.push(e[a]);return r}function l(e){if(0===e.eventBufferLimit||e.triggerData.data&&e.triggerData.data.doNotStore)e=null;else{var t={eventName:e.triggerData[e.attrName],appName:e.triggerData.appName};t.data=e.triggerData.passDataByRef?e.triggerData.data:o(e.triggerData.data),e.eventBufferLimit>0?(e.index>=e.eventBufferLimit&&(e.index=0),e.fired[e.index]=t,e.index++):e.fired.push(t),e=null}}function s(e,t){var n=!1;if(!t)return a("Ev listen id not spec for unregister","ERROR","Events"),null;for(var r in e)if(e.hasOwnProperty(r))for(var i=0;i<e[r].length;i++)if(e[r][i].id==t){e[r].splice(i,1),a("Ev listen="+t+" and name="+r+" unregister","DEBUG","Events"),n=!0;break}return n||a("Ev listen not found "+t+" unregister","DEBUG","Events"),n}function c(e,t,n,r){var i=[];if(e&&e.length)for(var o=0;o<e.length;o++)try{var u=!n&&e[o].func===t,l=!t&&n&&e[o].context===n,s=t&&n&&e[o].func===t&&e[o].context===n,c=r&&r===e[o].appName,f="*"===e[o].appName;if(u||l||s){if(c||f)continue;if(l)continue}else if(!t&&!n&&c)continue;i.push(e[o])}catch(e){a("Error in unbind e="+e.message,"ERROR","Events")}return i}var f={getListeners:r,log:a,unbind:i,hasFired:u,cloneEventData:o,storeEventData:l};return n||(t.EventsUtil=t.EventsUtil||f),f}),function(n,o){"use strict";r=[a],void 0!==(i=function(e){return o(n,n,e,!0)}.apply(t,r))&&(e.exports=i)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(e,t,n,r){"use strict";function a(e){function t(e){return e?(e.triggerOnce=!0,r(e)):null}function r(e,t,a){var i=e;if("string"==typeof e&&(i={appName:e,eventName:t,func:a}),i.appName=i.appName||f,"*"!==f&&("string"!=typeof e||"function"!=typeof t&&void 0!==t||(i.eventName=e)),!i.eventName||!i.func||"function"!=typeof i.func&&i.func.constructor!==Array)return n.log("Ev listen has invalid params: evName=["+i.eventName+"]","ERROR","Events"),null;if(i.func.constructor===Array){for(var o,u,l=[],s=0;s<i.func.length;s++)o=n.cloneEventData(i),o.func=i.func[s],u=r(o),l.push(u);return l}var c=h+v++,p={id:c,func:i.func,context:i.context||null,aSync:!!i.aSync,appName:i.appName,triggerOnce:i.triggerOnce||!1};return m[i.eventName]=m[i.eventName]||[],m[i.eventName].push(p),n.log("Ev listen rgstr: evName=["+i.eventName+"] aSync="+p.aSync+" appName="+p.name,"DEBUG","Events"),i=null,e=null,c}function a(e){return"*"!==f&&(e.appName=e.appName||f),n.unbind({unbindObj:e,attrName:d,loggerName:p,lstnrs:m})}function i(e,t){return void 0===t&&(t=e,e=f),n.hasFired(g,e,t)}function o(e,t,r){var a=e;if("string"==typeof e&&(a={eventName:t,appName:e,data:r}),"*"!==f&&(a.appName=a.appName||f,"string"!=typeof e||"object"!=typeof t&&void 0!==t||(a.eventName=e)),!a||void 0===a.eventName)return n.log("Ev name not spec for publish","ERROR","Events"),a=null,null;a.passDataByRef=a.passDataByRef||!s,l(a);var i=n.getListeners(m,a.eventName,a.appName);if(i.length>0)for(var o=0;o<i.length;o++){var c=a.passDataByRef?a.data:n.cloneEventData(a.data),p={appName:a.appName,eventName:a.eventName},d=i[o];d.aSync||c&&c.aSync?setTimeout(u(d,c,p),0):u(d,c,p)()}return a=null,i.length>0}function u(e,t,r){return function(){try{e.func.call(e.context,t,r),t=null,e.triggerOnce&&a(e),e=null}catch(t){n.log("Error executing "+r.eventName+" eventId: "+e.id+"e="+t.message,"ERROR","Events")}}}function l(e){n.storeEventData({triggerData:e,eventBufferLimit:c,attrName:d,fired:g,index:y})}var s,c,f,p="Events",d="eventName",v=0,m={},g=[],h="evId_",y=0;f=e&&e.appName||"*",s=!(!e||"boolean"!=typeof e.cloneEventData)&&e.cloneEventData,c=e&&!isNaN(e.eventBufferLimit)?e.eventBufferLimit:-1,this.once=t,this.hasFired=i,this.trigger=o,this.publish=o,this.bind=r,this.register=r,this.unbind=a,this.unregister=a}return r||(t.Events=t.Events||a),a})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(0),l=function(){function e(){r(this,e),this.events=new u({cloneEventData:!0}),this.provider=new o.default(this.events),this.maxAllowedElements=50}return a(e,[{key:"init",value:function(e){e&&(isNaN(e.maxAllowedElements)||(this.maxAllowedElements=e.maxAllowedElements))}},{key:"renderElement",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(r>=this.maxAllowedElements)){var a=r,i=this.provider.get(e.type),o=void 0;i&&(o=i(e))&&(t.appendChild(o),Array.isArray(e.elements)&&e.elements.forEach(function(e){a+=1,n.renderElement(e,o,a)}))}}},{key:"render",value:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return n.className="lp-json-pollock",t.appendChild(n),this.renderElement(e,n),t}},{key:"registerAction",value:function(e,t){this.events.bind({eventName:e,func:function(e){t(e)}})}},{key:"registerElement",value:function(e,t){this.provider.set(e,t)}}]),e}();t.default=l},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerAction=t.render=t.init=void 0;var a=n(2),i=(r(a),n(1)),o=r(i),u=new o.default,l=u.init.bind(u),s=u.render.bind(u),c=u.registerAction.bind(u);t.init=l,t.render=s,t.registerAction=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(i),u=(n(0),function(){function e(t){var n=this;r(this,e),this.elements={},this.events=t,this.set("text",function(e){o.default.validateParameters(e,"text");var t=document.createElement("div");return t.className="lp-json-pollock-element-text",t.innerHTML='<span style="'+o.default.styleToCss(e.style)+'" title="'+(e.tooltip||"")+'" aria-label="'+(e.tooltip||"")+'">'+e.text+"</span>",t}),this.set("button",function(e){o.default.validateParameters(e,"title","action");var t=document.createElement("div");t.className="lp-json-pollock-element-button";var r=document.createElement("button");return r.textContent=e.title,e.tooltip&&(r.title=e.tooltip,r.setAttribute("aria-label",e.tooltip)),e.style&&(r.style.cssText=o.default.styleToCss(e.style)),e.action&&(r.onclick=n.wrapAction(e.action)),t.appendChild(r),t}),this.set("image",function(e){o.default.validateParameters(e,"url");var t=document.createElement("div");t.className="lp-json-pollock-element-image loading";var r=document.createElement("img");return r.src=e.url,e.tooltip&&(r.title=e.tooltip,r.setAttribute("aria-label",e.tooltip)),e.style&&(r.style.cssText=o.default.styleToCss(e.style)),e.caption&&(t.innerHTML+="<div>"+e.caption+"</div"),r.onload=function(){t.className="lp-json-pollock-element-image"},e.action&&(r.onclick=n.wrapAction(e.action)),t.appendChild(r),t}),this.set("vertical",function(e){o.default.validateParameters(e,"elements");var t=document.createElement("div");return t.className="lp-json-pollock-layout-vertical",t})}return a(e,[{key:"get",value:function(e){return this.elements[e]}},{key:"set",value:function(e,t){this.elements[e]=t}},{key:"wrapAction",value:function(e){var t=this;return function(){t.events.trigger({eventName:e.type,data:e})}}}]),e}());t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={styleToCss:function(e){var t="";return e&&(e.color&&(t+="color:"+e.color+";"),e["background-color"]&&(t+="background-color:"+e["background-color"]+";"),e.bold&&(t+="font-weight:bold;"),e.italic&&(t+="font-style:italic;"),e.size&&(t+="font-size:"+this.sizeToPx(e.size)+"px;")),t},sizeToPx:function(e){switch(e){case"small":return 11;case"medium":return 13;case"large":return 17;default:return 13}},validateParameters:function(e){if(!e.type)throw new Error("Missing configuration: type");for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){if(void 0===e[t])throw new Error("Missing configuration: "+t+" is a mandatory for element of type "+e.type)})}}}])});